

USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION
END
GO

Create table NOTIFICACION
(ID_NOTIFICACION  INT          NOT NULL
,TOKEN            VARCHAR(50) NOT NULL
,DESCRIPCION      VARCHAR(100) NOT NULL
,ESTADO           BIT          NOT NULL
,EJECUCION        VARCHAR(01)  NOT NULL
,FECHA_EJECUCION  DATETIME     NOT NULL
,SERVICIO         BIT          NOT NULL)

GO

ALTER TABLE NOTIFICACION ADD PRIMARY KEY NONCLUSTERED (ID_NOTIFICACION)
GO
CREATE CLUSTERED INDEX K_LLAVE ON NOTIFICACION(TOKEN)
GO



USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION_DIA' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION_DIA
END
GO

Create table NOTIFICACION_DIA
(ID			      INT IDENTITY
,ID_NOTIFICACION  INT NOT NULL
,LUNES            BIT NOT NULL
,MARTES           BIT NOT NULL
,MIERCOLES        BIT NOT NULL
,JUEVES           BIT NOT NULL
,VIERNES          BIT NOT NULL
,SABADO           BIT NOT NULL
,DOMINGO          BIT NOT NULL
)

GO
ALTER TABLE NOTIFICACION_DIA ADD PRIMARY KEY NONCLUSTERED (ID)
GO
CREATE CLUSTERED INDEX K_ID_NOTIFICACION  ON NOTIFICACION_DIA (ID_NOTIFICACION);
GO






USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION_DINAMICA' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION_DINAMICA
END
GO

Create table NOTIFICACION_DINAMICA
(ID				  INT IDENTITY
,ID_NOTIFICACION  INT      NOT NULL
,NUMERO           INT      NOT NULL
,TIEMPO           CHAR(01) NOT NULL
,HORA_INI         INT      NOT NULL
,MINUTO_INI       INT      NOT NULL
,HORA_FIN         INT      NOT NULL
,MINUTO_FIN       INT      NOT NULL
)

GO
ALTER TABLE NOTIFICACION_DINAMICA ADD PRIMARY KEY NONCLUSTERED (ID)
GO
CREATE CLUSTERED INDEX K_ID_NOTIFICACION  ON NOTIFICACION_DINAMICA (ID_NOTIFICACION);
GO






USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION_FECHA' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION_FECHA
END
GO

Create table NOTIFICACION_FECHA
(ID				  INT IDENTITY,
 ID_NOTIFICACION  INT  NOT NULL
,FECHA_INICIO     DATE NOT NULL
,FECHA_FINAL      DATE NOT NULL)

GO
ALTER TABLE NOTIFICACION_FECHA ADD PRIMARY KEY NONCLUSTERED (ID)
GO
CREATE CLUSTERED INDEX K_ID_NOTIFICACION ON  NOTIFICACION_FECHA(ID_NOTIFICACION)
GO




USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION_HORA' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION_HORA
END
GO

Create table NOTIFICACION_HORA
(ID                   INT IDENTITY
,ID_NOTIFICACION      INT      NOT NULL
,HORA                 SMALLINT NOT NULL
,MINUTO               SMALLINT NOT NULL
,FECHA_EJECUCION      DATETIME NOT NULL)

GO
ALTER TABLE NOTIFICACION_HORA ADD PRIMARY KEY NONCLUSTERED (ID)
GO
CREATE CLUSTERED INDEX K_ID_NOTIFICACION ON  NOTIFICACION_HORA(ID_NOTIFICACION)
GO




USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'NOTIFICACION_LOG' and type = 'u') BEGIN
   DROP TABLE NOTIFICACION_LOG
END
GO

Create table NOTIFICACION_LOG
(ID_NOTIFICACION      INT NOT NULL
,ID                   INT IDENTITY
,FECHA_EJECUCION      DATETIME NOT NULL)

GO
ALTER TABLE NOTIFICACION_LOG ADD PRIMARY KEY NONCLUSTERED (ID)
GO
CREATE CLUSTERED INDEX K_ORDEN ON NOTIFICACION_LOG(ID_NOTIFICACION,ID,FECHA_EJECUCION)
GO


USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'TBX_ALIAS' and type = 'u') BEGIN
   DROP TABLE TBX_ALIAS
END
GO

Create table TBX_ALIAS
(TABLA      VARCHAR(255) NOT NULL
,ALIAS      VARCHAR(255) NOT NULL)

GO

USE IBR_ALO_JOB 
GO


IF EXISTS (SELECT 1 FROM sys.objects where name = 'VALORES' and type = 'u') BEGIN
   DROP TABLE VALORES
END
GO

Create table VALORES
(ID_VALORES      INT NOT NULL
,ID_NOTIFICACION INT NOT NULL
,URL			 VARCHAR (255) NOT NULL
,SP				 VARCHAR(255) NOT NULL
,SISTEMA		 VARCHAR(255) NOT NULL
,PARAMETROS		 VARCHAR(MAX) NOT NULL
,FILTROS		 VARCHAR(MAX) NOT NULL)

GO
ALTER TABLE VALORES ADD PRIMARY KEY NONCLUSTERED (ID_VALORES)
GO

